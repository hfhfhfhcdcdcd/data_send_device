# 一、在串口模块的基础上加一点修改
## 1. 这一段讲做什么
~~我的博客是连续剧，觉得有参考/纠错/鼓励的价值的话，我非常期待能与大家多多交流呀~~

**小**梅哥的视频P14集，后半部分讲，能不能通过在大模块中操作一个控制信号send_go，进而影响子模块（就是串口模块，以下称串口模块）种的send_en信号，进而来操控串口发送数据的节奏呢？↓↓↓

![alt text](image.png)

想要在大模块中操纵send_go信号，那就需要在大模块中给send_go信号赋值。而send_go信号的变化凭借的是:信号发生器希望在哪一个时刻发送数据，这完全取决于信号发生器的设置。当然，由于我还没学到写信号发生器的模块，所以假设不随信号发生器的喜好，随我的喜好。我选择每隔10ms通过串口发送8bit数据。那么回到“send_go应该何时发送的问题”，通过分析，认为send_go每隔10ms来一个脉冲挺合适。发送流程是这样的：每隔10mssend_en拉高一个时钟周期，然后把send_go当做串口模块的输入端口，send_go一拉高，send_en就拉高，起始位、数据位、停止位，就是在send_en拉搞的时段没发送数据的。直到停止位的到来，send_en拉低。下一个send_go的到来将再次激发串口传输数据。
## 2. 这一段讲为什么要在这次的代码中加入r_data
大模块把data传输给串口模块，串口模块会分时刻把data传给uart_tx。这个传输的过程是one by one,说不准就会有一位受到干扰由0变1，因此，把要传的数据寄存到寄存器里面，保证传输尽量少出错。r_data就是那个寄存器。我是这样理解的。
## 3.
在大模块里面要加入这几句话：
![alt text](e07fc41ce42c175908c2dfd1ab92282a.jpg)
小模块里面加入这几句话